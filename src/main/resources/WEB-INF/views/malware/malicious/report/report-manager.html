
<div class="tabbable">
	<ul class="nav nav-tabs" id="myTab">
		<li class="active"><a data-toggle="tab" href="#home"> <i
				class="green ace-icon fa fa-file-audio-o bigger-120"></i> 软件传播上报结果
		</a></li>

		<li class=""><a data-toggle="tab" href="#rjyb_result"> <i
				class="green ace-icon fa fa-clipboard bigger-120"></i> 软件样本上报结果
		</a></li>

		<li class=""><a data-toggle="tab" href="#eywz_result"> <i
				class="green ace-icon fa fa-chain-broken bigger-120"></i> 恶意网址上报结果
		</a></li>
	</ul>

	<div class="tab-content">
	<!-- 软件传播上报结果 -->
		<div id="home" class="tab-pane active clearfix">
			<form action="${ctxPath}/reportResult/list" method="post"
				id="search-form" target="list-page" class="center clearfix">
				<input hidden="hidden" value="1" name="reportType">
				<input hidden="hidden" type="submit" id="search-btn" />
			</form>
			<div class="space-6"></div>
			<button type="button" class="btn btn-default btn-sm btn-info" id="autoSpreadButton"  onclick="change(1);">
			             @if(softSpreadType=='1'){
				                                               手动
						  @}else {
						                  自动
						  @}  
			  </button>
			<div id="list-page"></div>
		</div>
	<!-- 软件样本上报结果 -->
		<div id="rjyb_result" class="tab-pane  clearfix">
			<form action="${ctxPath}/reportResult/list" method="post"
				id="rjyb-search-form" target="rjyb-list-page" class="center clearfix">
					<input hidden="hidden" value="2" name="reportType">
				<input hidden="hidden" type="submit" id="rjyb-search-btn" />
			</form>
			<div class="space-6"></div>
			<button type="button" class="btn btn-default btn-sm btn-info" id="autoSampleButton"  onclick="change(2);"> 
				 @if(softSampleType=='1'){
				                               手动
				 @}else {
						    自动
				 @}  
			   </button>
			<div id="rjyb-list-page"></div>
		</div>
	<!-- 恶意网址上报结果-->	
		<div id="eywz_result" class="tab-pane  clearfix">
			<form action="${ctxPath}/reportResult/list" method="post"
				id="eywz-search-form" target="eywz-list-page" class="center clearfix">
					<input hidden="hidden" value="3" name="reportType">
				<input hidden="hidden" type="submit" id="eywz-search-btn" />
			</form>
			<div class="space-6"></div>
		    <button type="button" class="btn btn-default btn-sm btn-info" id="autoMaButton"  onclick="change(3);">
			     @if(softMaliciousType=='1'){
		                                               手动
				  @}else {
				                 自动
				 @} 
		    </button>
			<div id="eywz-list-page"></div>
		</div>
	</div>
</div>

<style>
#profile .center>label {
	width: 100px;
	text-align: right;
}
</style>
<script>
	$("#search-form").getPageList({'submitBtnId' : 'search-btn'});
	$("#rjyb-search-form").getPageList({'submitBtnId' : 'rjyb-search-btn'});
	$("#eywz-search-form").getPageList({'submitBtnId' : 'eywz-search-btn'});
	
	$(function(){
		var softSpreadType = ${softSpreadType};
		var softSampleType = ${softSampleType};
		var softMaliciousType = ${softMaliciousType};
		if(softSpreadType=='1'){
			$("#autoSpreadButton").attr("class","btn btn-default btn-sm btn-info");
			$("#autoSpreadButton").attr("title","当前为自动模式，点击切换成手动模式");
		}else{
			$("#autoSpreadButton").attr("class","btn btn-success btn-sm btn-info");
			$("#autoSpreadButton").attr("title","当前为手动模式，点击切换成自动模式");
		}
		if(softSampleType=='1'){
			$("#autoSampleButton").attr("class","btn btn-default btn-sm btn-info");
			$("#autoSampleButton").attr("title","当前为自动模式，点击切换成手动模式");
		}else{
			$("#autoSampleButton").attr("class","btn btn-success btn-sm btn-info");
			$("#autoSampleButton").attr("title","当前为手动模式，点击切换成自动模式");
		}
		if(softMaliciousType=='1'){
			$("#autoMaButton").attr("class","btn btn-default btn-sm btn-info");
			$("#autoMaButton").attr("title","当前为自动模式，点击切换成手动模式");
		}else{
			$("#autoMaButton").attr("class","btn btn-success btn-sm btn-info");
			$("#autoMaButton").attr("title","当前为手动模式，点击切换成自动模式");
		}
		
	});
	
	//点击按钮切换文字
	function change(flag){
		   var key ="softSpreadType";
	       var value ="1";//默认是自动模式
	       var text = "";
	       var x ="";
		   if(flag==1){//软件传播上报结果
			   key = "softSpreadType";
		       x = document.getElementById("autoSpreadButton");
		   }else if(flag==2){//软件样本上报结果
			   key = "softSampleType";
			   x = document.getElementById("autoSampleButton");
		   }else if(flag==3){//恶意网址上报结果
			   key="softMaliciousType";
			   x = document.getElementById("autoMaButton");
		   }
		    text = x.innerHTML;//当前按钮的值
		    if(text=='自动'){
		    	value = "1";//切换成手动模式
		    }else{
		    	value = "2";
		    }
    	    $.ajax({  
    	    	async: false, 
    	        url: "reportResult/changType",  
    	        data: {"key":key,"value":value},  
    	        type: "GET",  
    	        traditional: true,  
    	        success: function (data) {  
    	        	if(data == "success"){
    	        		 if(text=='自动'){
    	        	    	 x.innerHTML = "手动";
    	        	    	 x.className='btn btn-default btn-sm btn-info';
    	        	    	 msgAlert(1,"开启自动模式！");
    	     		    }else{
    	     		  	     x.innerHTML = "自动";
    	     		  	   	 x.className='btn btn-success btn-sm btn-info';
    	     		  	      msgAlert(1,"开启手动模式！");
    	     		    }
    			
    				}else{
    					msgAlert(5,"切换成模式失败！");
    				}   
    	        }  
    	    });  
		    
	} 
</script>
