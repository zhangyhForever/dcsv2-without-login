
<style>
<!--

-->
</style>
<!-- ECharts单文件引入 -->
 <script src="static/echarts/build/dist/echarts.js"></script>
<table class="table  table-bordered  nomargin-bottom">
 @if(!isEmpty(flag)){
 
  <tr>
     <td colspan="4" style="text-align: center;"><strong>内存信息</strong></td>
   </tr>     
      <tr>
       <td colspan="2">内存总大小</td>
       <td colspan="2">${softDevice.totalMemorySize}MB</td>
   </tr>   
     <tr>
     <td colspan="2">已使用内存大小</td>
      <td colspan="2">${softDevice.useMemorySize}MB</td>
   </tr>
   <tr>
   <td colspan="4" >
      <!-- 内存使用情况发布图 -->
    <div id="ncqlfb" style="height:250px;">  </div>
   </td>
   </tr>
    <tr>
   <td colspan="4" >
      <!-- 内存使用情况趋势图-->
    <div id="ncqlqs" style="height:250px;">  </div>
   </td>
   </tr>
    <tr>
     <td colspan="4" style="text-align: center;"><strong>硬盘信息</strong></td>
   </tr>
      
   @for(item in softHardDiskList){
      <tr>
       <td>硬盘路径</td>
       <td>${item.hardPath!}</td>
       <td>硬盘总大小</td>
       <td>${item.hardSize!}G</td>
   </tr>
   @}  
   <tr>   
  <td colspan="4" >
      <!--硬盘使用情况发布图 -->
    <div id="ypqlfb" style="height:250px;">  </div>
   </td>
   </tr>
    <tr>
   <td colspan="4" >
      <!-- 硬盘使用情况趋势图-->
    <div id="ypqlqs" style="height:250px;">  </div>
   </td>
   </tr>
 
 @}

</table>
  <script type="text/javascript">
  
  
        // 基于准备好的dom，初始化echarts实例
        //内存使用情况发布图 
        var ncfbChart = echarts.init(document.getElementById('ncqlfb'));
        //内存使用情况趋势图 
        var ncqsChart = echarts.init(document.getElementById('ncqlqs'));
        //硬盘使用情况发布图 
        var ypfbChart = echarts.init(document.getElementById('ypqlfb'));
        //硬盘使用情况趋势图 
        var ypqsChart = echarts.init(document.getElementById('ypqlqs'));
        
        
        // 指定图表的配置项和数据
        
        
          //内存使用情况发布图
        	var	option = {
        			    title : {
        			        text: '内存使用情况分布图',
        			        subtext: '',
        			        x:'center'
        			    },
        			    tooltip : {
        			        trigger: 'item',
        			        formatter: "{a} <br/>{b} : {c} ({d}%)"
        			    },
        			    legend: {
        			        x : 'center',
        			        y : 'bottom',
        			        data: ['内存使用大小','内存空闲大小']
        			    },
        			    series : [
        			        {
        			            name: '内存分布',
        			            type: 'pie',
        			            radius : '55%',
        			            center: ['50%', '60%'],
        			            data:[
        			                {value:${softDevice.useMemorySize!}, name:'内存使用大小'},
        			                {value:${softDevice.totalMemorySize!}-${softDevice.useMemorySize!}, name:'内存空闲大小'}
        			            ],
        			            itemStyle: {
        			                emphasis: {
        			                    shadowBlur: 10,
        			                    shadowOffsetX: 0,
        			                    shadowColor: 'rgba(0, 0, 0, 0.5)'
        			                }
        			            }
        			        }
        			    ]
        			};
        ncfbChart.setOption(option);
          
         //内存使用情况趋势图 
        var data = [];
        var time = [];
        var ypdata = [];
        var nclist = ${historyList};
        for (var i=0;i<nclist.length;i++)
        {
          var memoryUsage = nclist[i].memoryUsage;
          data.push(memoryUsage);
          var monitoringTime = nclist[i].monitoringTime;
          var date = new Date(monitoringTime);
          Y = date.getFullYear() + '-';
          M = (date.getMonth()+1 < 10 ? '0'+(date.getMonth()+1) : date.getMonth()+1) + '-';
          D = date.getDate() + ' ';
          h = date.getHours() + ':';
          m = date.getMinutes() + ':';
          s = date.getSeconds(); 
          time.push(Y+M+D+h+m+s);
          var hardDiskUsage = nclist[i].hardDiskUsage;
          ypdata.push(hardDiskUsage);
        }
        option = {
            title: {
                text: '内存使用情况趋势图',
                x:'center'
            },
            tooltip: {
                trigger: 'axis',
          
            },
            xAxis: {
                type: 'category',
                splitLine: {
                    show: true
                },
                 data : time
            },
            yAxis: {
                type: 'value',
                boundaryGap: [0, '100%'],
                splitLine: {
                    show: true
                }
            },
            series: [{
                name: '内存趋势图',
                type: 'line',
                showSymbol: false,
                hoverAnimation: false,
                data: data
            }]
        };
    
        // 使用刚指定的配置项和数据显示图表。
        ncqsChart.setOption(option);
        
        
        
         //硬盘使用情况分布图
        var totalHardUsed = 0;//汇总已使用大小
        var totalhardSize = 0; //总使用大小
        var nclist = ${softHardDiskList};
        for (var i=0;i<nclist.length;i++)
        {
          var hardUsed = nclist[i].hardUsed; //已使用大小
          var hardSize = nclist[i].hardSize;//硬盘总大小
          totalHardUsed+=hardUsed;
          totalhardSize+=hardSize;
        }
        var totalfreeHard = totalhardSize - totalHardUsed;
        
           	var	option = {
        			    title : {
        			        text: '硬盘使用情况分布图',
        			        subtext: '',
        			        x:'center'
        			    },
        			    tooltip : {
        			        trigger: 'item',
        			        formatter: "{a} <br/>{b} : {c} ({d}%)"
        			    },
        			    legend: {
        			        x : 'center',
        			        y : 'bottom',
        			        data: ['硬盘使用大小','硬盘空闲大小']
        			    },
        			    series : [
        			        {
        			            name: '硬盘分布',
        			            type: 'pie',
        			            radius : '55%',
        			            center: ['50%', '60%'],
        			            data:[
        			                {value:totalHardUsed, name:'硬盘使用大小'},
        			                {value:totalfreeHard, name:'硬盘空闲大小'}
        			            ],
        			            itemStyle: {
        			                emphasis: {
        			                    shadowBlur: 10,
        			                    shadowOffsetX: 0,
        			                    shadowColor: 'rgba(0, 0, 0, 0.5)'
        			                }
        			            }
        			        }
        			    ]
        			};

        // 使用刚指定的配置项和数据显示图表。
        ypfbChart.setOption(option);
        
        
        //硬盘使用情况趋势图 


        option = {
            title: {
                text: '硬盘使用情况趋势图',
                x:'center'
            },
            tooltip: {
                trigger: 'axis',
          
            },
            xAxis: {
                type: 'category',
                splitLine: {
                    show: true
                },
                 data : time
            },
            yAxis: {
                type: 'value',
                boundaryGap: [0, '100%'],
                splitLine: {
                    show: true
                }
            },
            series: [{
                name: '硬盘趋势',
                type: 'line',
                showSymbol: false,
                hoverAnimation: false,
                data: ypdata
            }]
        };
    
        // 使用刚指定的配置项和数据显示图表。
        ypqsChart.setOption(option);
        
    </script>


<div class="space-8"></div>
