<div class="tabbable">
    <ul class="nav nav-tabs" id="myTab">
        <li class="active"><a data-toggle="tab" href="#home"> <i
                class="green ace-icon fa fa-users bigger-120"></i> 恶意程序
        </a></li>
    </ul>

    <div class="tab-content">
        <div id="home" class="tab-pane active clearfix">
            <#search>
            <form action="${ctxPath}/soft/list" method="post" id="search-form" target="list-page"
                  class="center clearfix">
                <div class="row">
                    <div class="col-sm-4">
                        <label class="inline col-sm-6">开始时间：</label>
                        <input type="text" class="width-50 Wdate" id="beginTime"name="beginTime"
                              onClick="WdatePicker({dateFmt:'yyyy-MM-dd',maxDate:'%y-%M-{%d}'})"/>
                    </div>
                    <div class="col-sm-4">
                        <label class="inline col-sm-6">结束时间：</label>
                        <input type="text" class="width-50 Wdate" name="endTime"
                               onclick="WdatePicker({dateFmt:'yyyy-MM-dd',minDate:'#F{$dp.$D(\'beginTime\')}'})"/>
                    </div>
                    <div class="col-sm-4">
                        <label class="inline col-sm-6">病毒名称：</label>
                        <input type="text" class="width-50" name="virusName"/>
                    </div>
                </div>
                <div class="row padding-tb-10">
                    <div class="col-sm-4">
                        <label class="inline col-sm-6">文件MD5：</label>
                        <input type="text" class="width-50" name="md5"/>
                    </div>
                    <div class="col-sm-4">
                        <label class="inline col-sm-6">IP：</label>
                        <input type="text" class="width-50" name="serverip"/>
                    </div>
                    <div class="col-sm-4">
                        <label class="inline col-sm-6">URL：</label>
                        <input type="text" class="width-50" name="url"/>
                    </div>
                </div>
                <div class="row ">
                    <div class="col-sm-4">
                        <label class="inline col-sm-6">归属国家：</label>
                        <select id="country" name="country" class="width-50" onchange="goProvince(this.value)">
                            <option value="">全部</option>
                            @for(item in countries){
                            <option value="${item}">${item}</option>
                            @}
                        </select>
                    </div>
                    <div class="col-sm-4">
                        <label class="inline col-sm-6">归属省：</label>
                        <select id="province" name="province" class="width-50" onchange="gocity(this.value)">
                            <option value="">全部</option>
                            @for(item in provinces){
                            <option value="${item}">${item}</option>
                            @}
                        </select>
                    </div>
                    <div class="col-sm-4">
                        <label class="inline col-sm-6">归属市：</label>
                        <select id="city" name="city" class="width-50">
                            <option value="">全部</option>
                            @for(item in cities){
                            <option value="${item}">${item}</option>
                            @}
                        </select>
                    </div>
                </div>
                <div class="row padding-tb-10">
                    <div class="col-sm-4">
                        <label class="inline col-sm-6">归属运营商：</label>
                        <select id="carrier" name="carrier" class="width-50">
                            <option value="">全部</option>
                            @for(item in carriers){
                            <option value="${item.carrier!}">${item.carrier!}</option>
                            @}
                        </select>
                    </div>
                </div>
                <div class="row padding-tb-10">
                    <div class="col-sm-8">
				<span
                        class="btn btn-info btn-sm col-sm-3" id="search-btn">条 件 查 询</span>
                        <span class="btn center btn-primary btn-sm col-sm-3"
                              onclick="reForm('search-form','search-btn',this)">重 置</span>

                        <a class="btn btn-info btn-sm col-sm-3" id="export"
                           data-mode="detail" data-title="导出"
                           data-url="${ctxPath}/soft/openExport"
                           data-width='50%'
                           data-height='50%'
                        >导 出
                        </a>
                    </div>
                </div>
            </form>
        </#search>
        <div class="space-6"></div>
        <div id="list-page"></div>
    </div>
</div>
<style>
    #profile .center > label {
        width: 100px;
        text-align: right;
    }
</style>
<script>
    $("#search-form").getPageList({'submitBtnId': 'search-btn'});

    function goProvince(country) {
        $.ajax({
            url: "soft/provinceInfo",
            type: "POST",
            dataType: "json",
            data: {
                country: country
            },
            success: function (data) {
                console.log(data);
                var html = "<option value=''>全部</option>";
                $.each(data, function (idx, item) {
                    html += "<option value='" + item + "'>" + item + "</option>"
                });
                $("#province").html(html);
            }
        })
    }

    function gocity(province) {
        $.ajax({
            url: "soft/cityInfo",
            type: "POST",
            dataType: 'json',
            data: {
                province: province
            },
            success: function (data) {
                console.log(data);
                var html = "<option value=''>全部</option>";
                $.each(data, function (idx, item) {
                    html += "<option value='" + item + "'>" + item + "</option>"
                });
                $("#city").html(html);
            }
        });
    }

    /**
     恶意程序
     **/
    $("#eycx-search-form").getPageList({'submitBtnId': 'eycx-search-btn'});

    function eycxgocity(locationName) {
        $.ajax({
            url: "extract/cityInfo",
            type: "POST",
            dataType: 'json',
            data: {
                attributionArea: locationName
            },
            success: function (data) {
                var html = "<option value=''>全部</option>";
                $.each(data.data, function (idx, item) {
                    html += "<option value='" + item.cityName + "'>" + item.cityName + "</option>"
                });
                $("#attribution_city").html(html);
            }
        });
    }
</script>

<script>
    function IDValue() {
        var checkbox = document.getElementsByName("onSelect");
        var IDValue = new Array();
        for (var i = 0; i < checkbox.length; i++) {
            if (checkbox[i].checked == true) {
                IDValue.push(checkbox[i].value);
            }
        }
        return IDValue;
    }

    function getID() {
        var checkbox = document.getElementsByName("Select");
        var IDValue = new Array();
        for (var i = 0; i < checkbox.length; i++) {
            if (checkbox[i].checked == true) {
                IDValue.push(checkbox[i].value);
            }
        }
        return IDValue;
    }
</script>
